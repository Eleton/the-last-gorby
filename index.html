<html>
  <head>
    <!-- Icons made by
    <a href="https://www.flaticon.com/authors/smashicons" title="Smashicons"
      >Smashicons</a
    >
    from
    <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a> -->
    <style>
      body {
        margin: 0;
        height: 100vh;
        display: grid;
        grid-template-rows: 20% auto 20%;
        justify-items: center;
        align-items: center;
        flex-direction: column;
        background-color: #00b8ab;
      }
      .background {
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        z-index: -1;
      }
      .background.hidden {
        opacity: 0;
      }
      .title {
        flex: 2;
        font-family: "Lato", sans-serif;
        font-weight: 900;
        font-size: 4.5rem;
        color: #424242;
        text-align: center;
        margin: 0;
      }
      .footer {
        flex: 2;
        font-family: "Lato", sans-serif;
        font-weight: 900;
        font-size: 2.5rem;
        color: #424242;
        text-align: center;
        width: 100%;
        display: grid;
        grid-template-columns: 10% 1fr 10%;
        justify-items: center;
        align-items: center;
      }
      .footer img {
        width: 40px;
      }
      .footer p {
        font-size: 3rem;
      }
      .footer.hiddenFooter {
        opacity: 0;
      }
      .gorbyContainer {
        flex: 5;
      }
      .base.portrait {
        transform: rotate(90deg);
        width: 60vh;
        height: 30vh;
        flex: 3;
      }
      .base {
        width: 40vw;
        min-width: calc(200px + 40vw);
        height: 20vw;
        min-height: calc(100px + 20vw);
        background-color: #d6934d;
        border-radius: 100%;
        position: relative;
        cursor: pointer;
      }
      .meat {
        border-radius: 100%;
        width: 75%;
        height: 60%;
        background-color: brown;
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
      }
      .bubble {
        background-color: #d6934d;
        border-bottom: 4px solid #222;
        border-bottom-left-radius: 100%;
        border-bottom-right-radius: 100%;
        width: 15%;
        height: 30%;
        position: absolute;
      }
      .one {
        left: 50%;
        transform: translate(-50%, 10%);
      }
      .two {
        left: 50%;
        transform: translate(50%, 20%) rotate(10deg);
      }
      .three {
        left: 50%;
        transform: translate(150%, 45%) rotate(20deg);
      }
      .four {
        top: 0;
        right: 0;
        transform: translate(-20%, 110%) rotate(90deg);
      }
      .five {
        bottom: 0;
        left: 50%;
        transform: translate(150%, -45%) rotate(160deg);
      }
      .six {
        bottom: 0;
        left: 50%;
        transform: translate(50%, -20%) rotate(170deg);
      }
      .seven {
        bottom: 0;
        left: 50%;
        transform: translate(-50%, -10%) rotate(180deg);
      }
      .eight {
        bottom: 0;
        left: 50%;
        transform: translate(-150%, -20%) rotate(190deg);
      }
      .nine {
        bottom: 0;
        left: 50%;
        transform: translate(-250%, -45%) rotate(200deg);
      }
      .ten {
        top: 0;
        left: 0;
        transform: translate(20%, 110%) rotate(270deg);
      }
      .eleven {
        left: 50%;
        transform: translate(-250%, 45%) rotate(-20deg);
      }
      .twelwe {
        left: 50%;
        transform: translate(-150%, 20%) rotate(-10deg);
      }
      .dotdotdot {
        opacity: 0;
        transition: opacity 20s;
        transition-delay: 5s;
      }
      .dotdotdot.questionmark {
        opacity: 1;
      }
      #volume {
        cursor: pointer;
      }
    </style>
    <script src="particles.min.js"></script>
  </head>
  <body>
    <div id="background-hammer" class="background hidden"></div>
    <div id="background-gorba" class="background hidden"></div>
    <h1 class="title">GRATTIS DEXTER!</h1>
    <div class="gorbyContainer">
      <div class="base">
        <div class="meat"></div>
        <div class="bubble one"></div>
        <div class="bubble two"></div>
        <div class="bubble three"></div>

        <div class="bubble five"></div>
        <div class="bubble six"></div>
        <div class="bubble seven"></div>
        <div class="bubble eight"></div>
        <div class="bubble nine"></div>

        <div class="bubble eleven"></div>
        <div class="bubble twelwe"></div>

        <div class="bubble four"></div>
        <div class="bubble ten"></div>
      </div>
    </div>
    <div class="footer hiddenFooter">
      <div></div>
      <p>Nu finns det inga fler.<span class="dotdotdot">..?</span></p>
      <img id="volume" src="volume_off.svg" alt="Sound on" />
    </div>
  </body>
  <script>
    const dotdotdot = document.querySelector(".dotdotdot");
    particlesJS.load(
      "background-hammer",
      "./particles_hammer.json",
      function () {
        console.log("callback - particles.js config loaded");
      }
    );
    particlesJS.load("background-gorba", "./particles_gorba.json", function () {
      console.log("callback - particles.js config loaded");
    });

    const gorby = document.querySelector(".base");
    const gorbyEvent = () => {
      toggleSound();
      const footer = document.querySelector(".footer");
      footer.classList.remove("hiddenFooter");
      gorby.removeEventListener("click", gorbyEvent);
      dotdotdot.classList.add("questionmark");
    };
    gorby.addEventListener("click", gorbyEvent);
    // if (window.matchMedia("(orientation: portrait)").matches) {
    //   gorby.classList.add("portrait");
    // }
    // window.addEventListener("orientationchange", (event) => {
    //   const { type } = event.target.screen.orientation;
    //   console.log(event.target.matchMedia("(orientation: portrait)").matches);
    //   setTimeout(() => {
    //     if (event.target.matchMedia("(orientation: portrait)").matches) {
    //       gorby.classList.add("portrait");
    //       console.log(event.target.matchMedia("(orientation: portrait)"));
    //     } else if (
    //       event.target.matchMedia("(orientation: landscape)").matches
    //     ) {
    //       gorby.classList.remove("portrait");
    //       console.log("landscape");
    //     }
    //   }, 5);
    // });

    let sound = false;
    const volume = document.querySelector("#volume");
    const audio = new Audio("anthem.mp3");
    const toggleSound = () => {
      const bg_hammer = document.querySelector("#background-hammer");
      const bg_gorba = document.querySelector("#background-gorba");
      if (sound) {
        volume.src = "volume_off.svg";
        sound = false;
        bg_hammer.classList.add("hidden");
        bg_gorba.classList.add("hidden");
        audio.pause();
      } else {
        volume.src = "volume_on.svg";
        sound = true;
        bg_hammer.classList.remove("hidden");
        bg_gorba.classList.remove("hidden");
        audio.play();
      }
    };
    volume.addEventListener("click", toggleSound);
  </script>
</html>
